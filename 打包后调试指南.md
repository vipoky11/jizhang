# 打包后调试指南

## 🔍 查看日志

### Mac 系统

打包后的应用日志会输出到控制台。查看日志的方法：

#### 方法 1：通过终端运行应用

```bash
# 找到打包后的应用
cd dist/mac

# 运行应用并查看输出
./记账系统.app/Contents/MacOS/记账系统
```

#### 方法 2：查看系统日志

```bash
# 查看最近的日志
log show --predicate 'process == "记账系统"' --last 1m

# 或者使用 Console.app
open -a Console
```

#### 方法 3：启用详细日志

在终端中运行：
```bash
/Applications/记账系统.app/Contents/MacOS/记账系统 --enable-logging
```

---

## 🐛 常见问题排查

### 问题 1：窗口完全不显示

**检查步骤：**

1. **查看控制台输出**
   ```bash
   ./记账系统.app/Contents/MacOS/记账系统
   ```
   查看是否有错误信息

2. **检查文件是否存在**
   ```bash
   ls -la 记账系统.app/Contents/Resources/app/client/build/index.html
   ```

3. **检查权限**
   ```bash
   chmod +x 记账系统.app/Contents/MacOS/记账系统
   ```

### 问题 2：窗口显示但内容空白

**可能原因：**
- `index.html` 文件路径不正确
- 静态资源路径问题
- 服务器未启动

**解决：**
- 查看控制台日志中的路径信息
- 检查 `client/build/index.html` 是否存在

### 问题 3：服务器启动失败

**检查：**
- 查看控制台是否有服务器启动错误
- 检查 `server/index.js` 是否被打包
- 检查 node_modules 是否包含必要依赖

---

## 📝 调试技巧

### 1. 添加更多日志

在 `electron/main.js` 中已经添加了详细的日志输出，包括：
- 应用路径
- 文件存在性检查
- 服务器启动状态
- 窗口创建过程

### 2. 使用开发者工具

在开发模式下，可以取消注释：
```javascript
mainWindow.webContents.openDevTools();
```

### 3. 测试简单页面

如果窗口能显示但内容加载失败，会显示错误页面，包含：
- 尝试的路径列表
- 应用路径信息
- 资源路径信息

---

## 🔧 快速修复

如果窗口完全不显示，尝试：

1. **重新打包**
   ```bash
   npm run electron:build
   ```

2. **检查打包输出**
   确认 `dist/` 目录下有正确的文件结构

3. **手动测试**
   直接在终端运行应用查看错误

---

## 📞 获取帮助

如果问题仍然存在，请提供：
1. 控制台的完整错误输出
2. 打包后的文件结构
3. 操作系统版本

