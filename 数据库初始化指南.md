# æ•°æ®åº“åˆå§‹åŒ–æŒ‡å—

## æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Node.js è„šæœ¬ï¼ˆæ¨èï¼‰âœ¨

è¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨ä» `.env` æ–‡ä»¶è¯»å–æ•°æ®åº“é…ç½®ã€‚

### æ­¥éª¤ï¼š

1. **åˆ›å»º `.env` æ–‡ä»¶**
   ```bash
   cp env.example .env
   ```

2. **ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„æ•°æ®åº“ä¿¡æ¯**
   ```env
   DB_HOST=localhost
   DB_USER=root
   DB_PASSWORD=ä½ çš„MySQLå¯†ç 
   DB_NAME=dish_accounting
   DB_PORT=3306
   PORT=5000
   ```

3. **è¿è¡Œåˆå§‹åŒ–è„šæœ¬**
   ```bash
   npm run init-db
   ```

å®Œæˆï¼æ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»ºå¹¶åˆå§‹åŒ–ã€‚

---

## æ–¹æ³•äºŒï¼šä½¿ç”¨ MySQL å‘½ä»¤è¡Œ

å¦‚æœä½ æ›´å–œæ¬¢ä½¿ç”¨ MySQL å‘½ä»¤è¡Œå·¥å…·ï¼š

### æ­¥éª¤ï¼š

1. **ç™»å½• MySQL**
   ```bash
   mysql -u root -p
   ```
   ç„¶åè¾“å…¥ä½ çš„ MySQL å¯†ç 

2. **æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬**
   ```sql
   source server/database/init.sql
   ```
   
   æˆ–è€…ç›´æ¥å¤åˆ¶ SQL æ–‡ä»¶å†…å®¹åˆ° MySQL å®¢æˆ·ç«¯æ‰§è¡Œ

3. **éªŒè¯æ•°æ®åº“æ˜¯å¦åˆ›å»ºæˆåŠŸ**
   ```sql
   SHOW DATABASES;
   USE dish_accounting;
   SHOW TABLES;
   DESCRIBE transactions;
   ```

---

## æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ MySQL Workbench æˆ–å…¶ä»–å›¾å½¢åŒ–å·¥å…·

1. æ‰“å¼€ MySQL Workbench æˆ–å…¶ä»– MySQL å®¢æˆ·ç«¯å·¥å…·
2. è¿æ¥åˆ°ä½ çš„ MySQL æœåŠ¡å™¨
3. æ‰“å¼€ `server/database/init.sql` æ–‡ä»¶
4. æ‰§è¡Œ SQL è„šæœ¬

---

## éªŒè¯æ•°æ®åº“åˆå§‹åŒ–

åˆå§‹åŒ–å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

### ä½¿ç”¨ Node.js è„šæœ¬éªŒè¯ï¼š
```bash
node -e "
const mysql = require('mysql2/promise');
require('dotenv').config();
(async () => {
  const conn = await mysql.createConnection({
    host: process.env.DB_HOST || 'localhost',
    user: process.env.DB_USER || 'root',
    password: process.env.DB_PASSWORD || '',
    database: process.env.DB_NAME || 'dish_accounting'
  });
  const [rows] = await conn.query('SHOW TABLES');
  console.log('âœ… æ•°æ®åº“è¿æ¥æˆåŠŸï¼');
  console.log('ğŸ“‹ è¡¨åˆ—è¡¨:', rows);
  await conn.end();
})();
"
```

### ä½¿ç”¨ MySQL å‘½ä»¤è¡ŒéªŒè¯ï¼š
```bash
mysql -u root -p -e "USE dish_accounting; SHOW TABLES; DESCRIBE transactions;"
```

---

## å¸¸è§é—®é¢˜

### 1. è¿æ¥è¢«æ‹’ç» (ECONNREFUSED)
- **åŸå› **: MySQL æœåŠ¡æœªå¯åŠ¨
- **è§£å†³**: å¯åŠ¨ MySQL æœåŠ¡
  ```bash
  # macOS (ä½¿ç”¨ Homebrew)
  brew services start mysql
  
  # Linux
  sudo systemctl start mysql
  
  # Windows
  # åœ¨æœåŠ¡ç®¡ç†å™¨ä¸­å¯åŠ¨ MySQL æœåŠ¡
  ```

### 2. è®¿é—®è¢«æ‹’ç» (ER_ACCESS_DENIED_ERROR)
- **åŸå› **: ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
- **è§£å†³**: æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `DB_USER` å’Œ `DB_PASSWORD` æ˜¯å¦æ­£ç¡®

### 3. æ•°æ®åº“å·²å­˜åœ¨
- **æç¤º**: è„šæœ¬ä½¿ç”¨äº† `CREATE DATABASE IF NOT EXISTS`ï¼Œä¸ä¼šæŠ¥é”™
- **å¦‚æœéœ€è¦é‡æ–°åˆå§‹åŒ–**: å…ˆåˆ é™¤æ•°æ®åº“
  ```sql
  DROP DATABASE IF EXISTS dish_accounting;
  ```
  ç„¶åé‡æ–°è¿è¡Œåˆå§‹åŒ–è„šæœ¬

---

## ä¸‹ä¸€æ­¥

æ•°æ®åº“åˆå§‹åŒ–å®Œæˆåï¼Œä½ å¯ä»¥ï¼š

1. å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼š
   ```bash
   npm run server
   ```

2. å¯åŠ¨å‰ç«¯åº”ç”¨ï¼š
   ```bash
   npm run client
   ```

3. æˆ–è€…åŒæ—¶å¯åŠ¨å‰åç«¯ï¼š
   ```bash
   npm run dev
   ```

ç„¶åè®¿é—® http://localhost:3000 å¼€å§‹ä½¿ç”¨ç³»ç»Ÿï¼

