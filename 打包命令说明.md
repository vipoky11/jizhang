# æ‰“åŒ…å‘½ä»¤è¯´æ˜

## ğŸš€ å®Œæ•´æ‰“åŒ…æµç¨‹

### æ­¥éª¤ 1ï¼šé‡æ–°æ„å»ºå‰ç«¯ï¼ˆé‡è¦ï¼ï¼‰

```bash
cd client
npm run build
cd ..
```

è¿™ä¸€æ­¥ä¼šä½¿ç”¨ `homepage: "."` é…ç½®é‡æ–°æ‰“åŒ…ï¼Œç”Ÿæˆä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„é™æ€èµ„æºã€‚

### æ­¥éª¤ 2ï¼šæ‰“åŒ… Electron åº”ç”¨

```bash
npm run electron:build
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
1. è‡ªåŠ¨é‡æ–°æ„å»ºå‰ç«¯ï¼ˆå¦‚æœ `client/build` ä¸å­˜åœ¨ï¼‰
2. ä½¿ç”¨ `electron-builder` æ‰“åŒ…åº”ç”¨
3. ç”Ÿæˆ DMG å®‰è£…åŒ…ï¼ˆMacï¼‰æˆ– NSIS å®‰è£…ç¨‹åºï¼ˆWindowsï¼‰

---

## ğŸ“¦ æ‰“åŒ…è¾“å‡º

### Mac ç³»ç»Ÿ

æ‰“åŒ…åçš„æ–‡ä»¶ä½ç½®ï¼š
- **åº”ç”¨åŒ…**ï¼š`dist/mac-arm64/è®°è´¦ç³»ç»Ÿ.app`
- **DMG å®‰è£…åŒ…**ï¼š`dist/è®°è´¦ç³»ç»Ÿ-1.0.0-arm64.dmg`

### Windows ç³»ç»Ÿ

æ‰“åŒ…åçš„æ–‡ä»¶ä½ç½®ï¼š
- **åº”ç”¨åŒ…**ï¼š`dist/win-unpacked/è®°è´¦ç³»ç»Ÿ.exe`
- **å®‰è£…ç¨‹åº**ï¼š`dist/è®°è´¦ç³»ç»Ÿ Setup 1.0.0.exe`

### Linux ç³»ç»Ÿ

æ‰“åŒ…åçš„æ–‡ä»¶ä½ç½®ï¼š
- **åº”ç”¨åŒ…**ï¼š`dist/è®°è´¦ç³»ç»Ÿ-1.0.0.AppImage`

---

## ğŸ”§ å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤

### ä»…æ„å»ºå‰ç«¯ï¼ˆä¸æ‰“åŒ…ï¼‰

```bash
npm run build
```

### å¼€å‘æ¨¡å¼è¿è¡Œ Electronï¼ˆä¸æ‰“åŒ…ï¼‰

```bash
npm run electron:dev
```

è¿™ä¼šï¼š
1. å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼ˆç«¯å£ 5001ï¼‰
2. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 3000ï¼‰
3. å¯åŠ¨ Electron çª—å£

### æ¸…ç†æ‰“åŒ…è¾“å‡º

```bash
rm -rf dist
```

---

## âš¡ ä¸€é”®æ‰“åŒ…è„šæœ¬

å¦‚æœä½ æƒ³ä¸€é”®å®Œæˆæ‰€æœ‰æ­¥éª¤ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼š

```bash
#!/bin/bash
# æ¸…ç†æ—§çš„æ„å»º
rm -rf client/build
rm -rf dist

# æ„å»ºå‰ç«¯
cd client && npm run build && cd ..

# æ‰“åŒ… Electron
npm run electron:build

echo "âœ… æ‰“åŒ…å®Œæˆï¼"
echo "ğŸ“¦ DMG æ–‡ä»¶ä½ç½®: dist/è®°è´¦ç³»ç»Ÿ-1.0.0-arm64.dmg"
```

ä¿å­˜ä¸º `build.sh`ï¼Œç„¶åè¿è¡Œï¼š

```bash
chmod +x build.sh
./build.sh
```

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šæ‰“åŒ…å¤±è´¥ï¼Œæç¤ºæ‰¾ä¸åˆ°æ–‡ä»¶

**è§£å†³**ï¼šç¡®ä¿å…ˆè¿è¡Œ `cd client && npm run build`

### é—®é¢˜ 2ï¼šæ‰“åŒ…åçš„åº”ç”¨ç©ºç™½

**è§£å†³**ï¼š
1. ç¡®è®¤ `client/package.json` ä¸­æœ‰ `"homepage": "."`
2. é‡æ–°æ„å»ºå‰ç«¯ï¼š`cd client && npm run build`
3. é‡æ–°æ‰“åŒ…ï¼š`npm run electron:build`

### é—®é¢˜ 3ï¼šæ‰“åŒ…å¾ˆæ…¢

**åŸå› **ï¼šéœ€è¦é‡æ–°ç¼–è¯‘ native ä¾èµ–ï¼ˆå¦‚ `better-sqlite3`ï¼‰

**è§£å†³**ï¼šè¿™æ˜¯æ­£å¸¸çš„ï¼Œé¦–æ¬¡æ‰“åŒ…æˆ–æ›´æ–°ä¾èµ–åéœ€è¦é‡æ–°ç¼–è¯‘

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡æ‰“åŒ…**ï¼šå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå› ä¸ºéœ€è¦ä¸‹è½½ Electron å’Œç¼–è¯‘ native ä¾èµ–
2. **æ–‡ä»¶å¤§å°**ï¼šæ‰“åŒ…åçš„ DMG æ–‡ä»¶å¤§çº¦ 90-100MB
3. **ä»£ç ç­¾å**ï¼šMac ç³»ç»Ÿä¼šæç¤ºæœªç­¾åï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œä¸å½±å“ä½¿ç”¨
4. **æƒé™**ï¼šé¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦æˆäºˆæƒé™ï¼ˆç³»ç»Ÿè®¾ç½® â†’ å®‰å…¨æ€§ä¸éšç§ï¼‰

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

```bash
# å®Œæ•´æ‰“åŒ…æµç¨‹
cd client && npm run build && cd .. && npm run electron:build

# ä»…é‡æ–°æ‰“åŒ…ï¼ˆå¦‚æœå‰ç«¯å·²æ„å»ºï¼‰
npm run electron:build

# å¼€å‘æ¨¡å¼
npm run electron:dev
```

