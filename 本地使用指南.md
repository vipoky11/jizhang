# æœ¬åœ°ä½¿ç”¨æŒ‡å—

## ğŸ“‹ å‰ç½®è¦æ±‚

### 1. å®‰è£… Node.js
- ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/
- æ¨èç‰ˆæœ¬ï¼šNode.js 18+ 
- å®‰è£…åéªŒè¯ï¼š
  ```bash
  node -v
  npm -v
  ```

### 2. å®‰è£… MySQL

#### Mac å®‰è£…
```bash
# ä½¿ç”¨ Homebrewï¼ˆæ¨èï¼‰
brew install mysql

# å¯åŠ¨ MySQL æœåŠ¡
brew services start mysql

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
mysql.server start
```

#### Windows å®‰è£…
1. ä¸‹è½½ MySQL Installerï¼šhttps://dev.mysql.com/downloads/installer/
2. é€‰æ‹© "MySQL Server" å’Œ "MySQL Workbench"
3. å®‰è£…è¿‡ç¨‹ä¸­è®¾ç½® root å¯†ç ï¼ˆè®°ä½è¿™ä¸ªå¯†ç ï¼ï¼‰

#### éªŒè¯ MySQL å®‰è£…
```bash
mysql --version
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬å‰ç«¯å’Œåç«¯ï¼‰
npm run install-all
```

### æ­¥éª¤ 2ï¼šé…ç½®æ•°æ®åº“

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š

```env
# æœ¬åœ°æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=ä½ çš„MySQLå¯†ç 
DB_NAME=dish_accounting
DB_PORT=3306

# æœåŠ¡å™¨ç«¯å£
PORT=5000
```

**å¦‚æœæ²¡æœ‰è®¾ç½® MySQL root å¯†ç ï¼Œå¯ä»¥ç•™ç©ºï¼š**
```env
DB_PASSWORD=
```

### æ­¥éª¤ 3ï¼šåˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“å’Œè¡¨ç»“æ„
npm run init-db
```

å¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œå¯ä»¥åˆ›å»ºä¸“ç”¨ç”¨æˆ·ï¼š
```bash
npm run create-user
```
ç„¶åæŒ‰ç…§æç¤ºæ›´æ–° `.env` æ–‡ä»¶ã€‚

### æ­¥éª¤ 4ï¼šè¿è¡Œæ•°æ®åº“è¿ç§»ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦å®Œæ•´åŠŸèƒ½ï¼Œè¿è¡Œä»¥ä¸‹è¿ç§»è„šæœ¬ï¼š

```bash
# åˆ›å»ºåˆ†ç±»è¡¨
npm run migrate-categories

# åˆ›å»ºè´¦æˆ·è¡¨
npm run migrate-accounts

# åˆ›å»ºæ ‡ç­¾è¡¨
npm run migrate-tags

# åˆ›å»ºä¾›åº”å•†è¡¨
npm run migrate-suppliers

# åˆ›å»ºå¤‡å¿˜å½•è¡¨
npm run migrate-memos
```

### æ­¥éª¤ 5ï¼šå¯åŠ¨åº”ç”¨

```bash
# åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯
npm run dev
```

åº”ç”¨ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼šhttp://localhost:3000

---

## ğŸ”§ å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šMySQL è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š**
```
ECONNREFUSED
ER_ACCESS_DENIED_ERROR
```

**è§£å†³æ–¹æ³•ï¼š**

1. **æ£€æŸ¥ MySQL æ˜¯å¦è¿è¡Œ**
   ```bash
   # Mac
   brew services list
   # æˆ–
   mysql.server status
   
   # Windows
   # æ‰“å¼€"æœåŠ¡"ï¼ŒæŸ¥æ‰¾ MySQL æœåŠ¡æ˜¯å¦è¿è¡Œ
   ```

2. **æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç **
   - ç¡®è®¤ `.env` æ–‡ä»¶ä¸­çš„ `DB_USER` å’Œ `DB_PASSWORD` æ­£ç¡®
   - æµ‹è¯•è¿æ¥ï¼š
     ```bash
     mysql -u root -p
     ```

3. **åˆ›å»ºä¸“ç”¨æ•°æ®åº“ç”¨æˆ·ï¼ˆæ¨èï¼‰**
   ```bash
   npm run create-user
   ```

### é—®é¢˜ 2ï¼šæ•°æ®åº“ä¸å­˜åœ¨

**é”™è¯¯ä¿¡æ¯ï¼š**
```
ER_BAD_DB_ERROR
```

**è§£å†³æ–¹æ³•ï¼š**
```bash
npm run init-db
```

### é—®é¢˜ 3ï¼šç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Port 5000 is already in use
```

**è§£å†³æ–¹æ³•ï¼š**

```bash
# æ€æ­»å ç”¨ 5000 ç«¯å£çš„è¿›ç¨‹
npm run kill-port

# æˆ–è€…ä¿®æ”¹ .env ä¸­çš„ PORT
PORT=5001
```

### é—®é¢˜ 4ï¼šå‰ç«¯æ— æ³•è¿æ¥åç«¯

**æ£€æŸ¥ï¼š**
1. åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œï¼ˆæŸ¥çœ‹ç»ˆç«¯æ˜¯å¦æœ‰é”™è¯¯ï¼‰
2. å‰ç«¯ API åœ°å€æ˜¯å¦æ­£ç¡®ï¼ˆ`client/src/api/` ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼‰
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CORS é”™è¯¯

---

## ğŸ“ å¼€å‘å‘½ä»¤

### å¯åŠ¨å‘½ä»¤

```bash
# åŒæ—¶å¯åŠ¨å‰åç«¯ï¼ˆæ¨èï¼‰
npm run dev

# åªå¯åŠ¨åç«¯
npm run server

# åªå¯åŠ¨å‰ç«¯
npm run client
```

### æ•°æ®åº“å‘½ä»¤

```bash
# åˆå§‹åŒ–æ•°æ®åº“
npm run init-db

# æµ‹è¯•æ•°æ®åº“è¿æ¥
npm run test-db

# åˆ›å»ºæ•°æ®åº“ç”¨æˆ·
npm run create-user

# è¿è¡Œè¿ç§»è„šæœ¬
npm run migrate-categories
npm run migrate-accounts
npm run migrate-suppliers
```

---

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
èœå“è®°è´¦ç³»ç»Ÿ/
â”œâ”€â”€ client/                 # å‰ç«¯ React åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ api/           # API è°ƒç”¨
â”‚   â”‚   â””â”€â”€ App.js         # ä¸»åº”ç”¨
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                 # åç«¯ Node.js åº”ç”¨
â”‚   â”œâ”€â”€ routes/            # API è·¯ç”±
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“è„šæœ¬
â”‚   â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ index.js           # æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ .env                   # ç¯å¢ƒå˜é‡ï¼ˆéœ€è¦åˆ›å»ºï¼‰
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ package.json           # é¡¹ç›®é…ç½®
```

---

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¸è¦æäº¤ `.env` æ–‡ä»¶åˆ° Git**
   - `.gitignore` å·²åŒ…å« `.env`
   - ä½¿ç”¨ `.env.example` ä½œä¸ºæ¨¡æ¿

2. **ä½¿ç”¨ä¸“ç”¨æ•°æ®åº“ç”¨æˆ·**
   - ä¸è¦ä½¿ç”¨ root ç”¨æˆ·
   - è¿è¡Œ `npm run create-user` åˆ›å»ºä¸“ç”¨ç”¨æˆ·

3. **å®šæœŸå¤‡ä»½æ•°æ®åº“**
   ```bash
   # å¯¼å‡ºæ•°æ®åº“
   mysqldump -u root -p dish_accounting > backup.sql
   
   # å¯¼å…¥æ•°æ®åº“
   mysql -u root -p dish_accounting < backup.sql
   ```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

- âœ… æœ¬åœ°å¼€å‘ç¯å¢ƒå·²é…ç½®å®Œæˆ
- ğŸ“Š å¼€å§‹ä½¿ç”¨è®°è´¦ç³»ç»Ÿ
- ğŸ”„ å¦‚éœ€è·¨å¹³å°ä½¿ç”¨ï¼Œå‚è€ƒ `è·¨å¹³å°ä½¿ç”¨æ–¹æ¡ˆ.md`

---

## ğŸ’¡ æç¤º

- **å¼€å‘æ—¶**ï¼šä½¿ç”¨ `npm run dev` åŒæ—¶å¯åŠ¨å‰åç«¯ï¼Œæ”¯æŒçƒ­é‡è½½
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šéœ€è¦æ„å»ºå‰ç«¯å¹¶é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
- **æ•°æ®å¤‡ä»½**ï¼šå®šæœŸå¯¼å‡ºæ•°æ®åº“ï¼Œé¿å…æ•°æ®ä¸¢å¤±

