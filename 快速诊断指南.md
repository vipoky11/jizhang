# 快速诊断指南

## 🔍 问题：打包后运行空白，开发者工具也没反应

这说明应用可能根本没有启动，或者窗口创建失败。

## 🧪 诊断步骤

### 步骤 1：检查应用是否能启动

运行测试脚本：

```bash
./测试运行.sh
```

或者直接运行：

```bash
cd dist/mac-arm64
./记账系统.app/Contents/MacOS/记账系统 2>&1 | tee app.log
```

查看 `app.log` 文件，应该能看到：
- `🚀 Electron 主进程启动...`
- `✅ Electron 应用已就绪`
- `🪟 创建窗口...`

### 步骤 2：如果没有任何输出

可能的原因：
1. **应用根本没有启动** - 检查文件权限
2. **应用立即崩溃** - 查看系统日志
3. **路径问题** - 检查 `package.json` 中的 `main` 字段

### 步骤 3：检查系统日志

```bash
# 查看系统日志
log show --predicate 'process == "记账系统"' --last 5m

# 或者使用 Console.app
open -a Console
```

### 步骤 4：检查文件权限

```bash
chmod +x dist/mac-arm64/记账系统.app/Contents/MacOS/记账系统
```

### 步骤 5：检查应用入口点

确认 `package.json` 中的 `main` 字段：

```json
{
  "main": "electron/main.js"
}
```

## 🔧 临时解决方案

如果应用仍然无法启动，可以尝试：

1. **禁用代码签名检查**（Mac）：
   ```bash
   spctl --master-disable
   ```

2. **直接运行可执行文件**：
   ```bash
   cd dist/mac-arm64/记账系统.app/Contents/MacOS
   ./记账系统
   ```

3. **检查依赖**：
   确保所有 native 模块都已正确编译

## 📝 已添加的调试功能

我已经在代码中添加了：
- ✅ 启动时的详细日志
- ✅ 窗口创建过程的日志
- ✅ 错误捕获和显示
- ✅ 开发者工具自动打开

## 🚀 下一步

1. 运行 `./测试运行.sh` 查看完整输出
2. 将输出结果发给我，我会根据日志定位问题
3. 如果完全没有输出，检查系统日志

