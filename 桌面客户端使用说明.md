# 桌面客户端使用说明

## 🚀 快速开始

### 1. 安装依赖

```bash
npm run install-all
```

### 2. 开发模式运行

```bash
npm run electron:dev
```

这将：
- 启动后端服务器（端口 5000）
- 启动前端开发服务器（端口 3000）
- 启动 Electron 窗口

### 3. 打包应用

```bash
npm run electron:build
```

打包完成后，安装包会在 `dist/` 目录下：
- **Mac**: `记账系统-1.0.0.dmg`
- **Windows**: `记账系统 Setup 1.0.0.exe`
- **Linux**: `记账系统-1.0.0.AppImage`

---

## 📦 数据库说明

### SQLite 数据库

桌面客户端使用 **SQLite** 数据库，无需安装 MySQL。

- **数据库位置**：
  - Mac: `~/Library/Application Support/记账系统/accounting.db`
  - Windows: `%APPDATA%/记账系统/accounting.db`
  - Linux: `~/.config/记账系统/accounting.db`

- **数据备份**：直接复制 `.db` 文件即可备份

- **数据迁移**：可以将 `.db` 文件复制到其他设备使用

---

## 🔧 开发说明

### 环境变量

- `USE_SQLITE=true` - 使用 SQLite（桌面客户端默认）
- `NODE_ENV=production` - 生产模式（自动使用 SQLite）

### 数据库切换

如果需要切换回 MySQL（开发环境）：

1. 删除或注释 `USE_SQLITE` 环境变量
2. 确保 `.env` 文件中有 MySQL 配置
3. 重启服务器

---

## 📝 注意事项

1. **首次运行**：应用会自动初始化 SQLite 数据库和默认数据

2. **数据安全**：数据库文件存储在用户数据目录，卸载应用不会删除数据

3. **端口冲突**：确保 5000 端口未被占用

4. **打包大小**：首次打包可能需要较长时间，因为需要打包所有依赖

---

## 🐛 常见问题

### 问题 1：Electron 窗口空白

**解决**：检查后端服务器是否正常启动，查看控制台日志

### 问题 2：数据库初始化失败

**解决**：检查用户数据目录的写入权限

### 问题 3：打包失败

**解决**：
- 确保已运行 `npm run build` 构建前端
- 检查 `electron-builder` 配置
- 查看详细错误日志

---

## 🎯 下一步

- ✅ 添加应用图标
- ✅ 优化打包配置
- ✅ 添加自动更新功能（可选）

