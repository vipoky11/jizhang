# 端口问题说明

## 问题原因

端口 5000 被 macOS 的 **ControlCenter（AirPlay 接收器）** 服务占用了。

## 解决方案

### ✅ 已自动处理

我已经将后端端口改为 **5001**，并更新了前端 API 配置。

### 需要做的操作

1. **重启后端服务器**
   ```bash
   # 如果后端正在运行，先停止它（Ctrl+C）
   # 然后重新启动
   npm run server
   ```

2. **或者同时启动前后端**
   ```bash
   npm run dev
   ```

3. **验证连接**
   ```bash
   npm run check-backend
   ```

### 如果想继续使用端口 5000

如果你想使用端口 5000，需要关闭 macOS 的 AirPlay 接收器：

1. 打开 **系统设置** > **通用** > **隔空投放与接力**
2. 关闭 **隔空播放接收器**

或者使用命令行：
```bash
# 关闭 AirPlay 接收器
sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.AirPlayXPCHelper.plist
```

### 当前配置

- **后端端口**: 5001
- **前端端口**: 3000
- **API 地址**: http://localhost:5001/api

### 验证

启动后端后，应该看到：
```
服务器运行在端口 5001
数据库连接成功
```

然后在浏览器中访问 http://localhost:3000，应该可以正常添加记录了。

